{% extends "base.html" %}

{% block title %}–§–∏–ª–∏–∞–ª—ã ‚Äî Borodach Admin{% endblock %}

{% block content %}
<h1 class="mb-2">üè¢ –§–∏–ª–∏–∞–ª—ã</h1>

<div class="card mb-2">
    <div class="card-header">
        <h2 class="card-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª–∏–∞–ª</h2>
    </div>
    
    <form method="post" action="/branches/add">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <div class="form-group">
                <label class="form-label">YClients ID *</label>
                <input type="text" name="yclients_id" class="form-input" placeholder="123456" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ì–æ—Ä–æ–¥ *</label>
                <input type="text" name="city" class="form-input" placeholder="–ú–æ—Å–∫–≤–∞" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ê–¥—Ä–µ—Å *</label>
                <input type="text" name="address" class="form-input" placeholder="—É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, 1" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ (–¢–¶ –∏ —Ç.–¥.)</label>
                <input type="text" name="name" class="form-input" placeholder="–¢–¶ –ú–µ–≥–∞">
            </div>
            
            <div class="form-group">
                <label class="form-label">–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" name="display_name" class="form-input" placeholder="–ú–µ–≥–∞ –¢—ë–ø–ª—ã–π –°—Ç–∞–Ω">
            </div>
        </div>
        
        <button type="submit" class="btn btn-primary mt-1">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">üìã –°–ø–∏—Å–æ–∫ —Ñ–∏–ª–∏–∞–ª–æ–≤</h2>
        <span class="text-muted">{{ branches|length }} —à—Ç.</span>
    </div>
    
    {% if branches %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>YClients ID</th>
                <th>–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ì–æ—Ä–æ–¥</th>
                <th>–ê–¥—Ä–µ—Å</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for branch in branches %}
            <tr>
                <td>{{ branch.id }}</td>
                <td><code>{{ branch.yclients_id or '‚Äî' }}</code></td>
                <td><strong>{{ branch.display_name or '‚Äî' }}</strong></td>
                <td>{{ branch.city }}</td>
                <td>{{ branch.address }}</td>
                <td>{{ branch.name or '‚Äî' }}</td>
                <td>
                    {% if branch.is_active %}
                    <span class="text-success">–ê–∫—Ç–∏–≤–µ–Ω</span>
                    {% else %}
                    <span class="text-danger">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
                    {% endif %}
                </td>
                <td>
                    <div class="flex gap-1">
                        <a href="/branches/{{ branch.id }}/edit" class="btn btn-sm" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</a>
                        <form method="post" action="/branches/{{ branch.id }}/delete" style="display: inline;"
                              onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª–∏–∞–ª {{ branch.display_name or branch.city }}?');">
                            <button type="submit" class="btn btn-danger btn-sm" title="–£–¥–∞–ª–∏—Ç—å">üóë</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-muted">–§–∏–ª–∏–∞–ª—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Ñ–∏–ª–∏–∞–ª –≤—ã—à–µ.</p>
    {% endif %}
</div>
{% endblock %}

