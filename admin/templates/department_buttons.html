{% extends "base.html" %}

{% block title %}–ö–Ω–æ–ø–∫–∏ –æ—Ç–¥–µ–ª–æ–≤ ‚Äî –ê–¥–º–∏–Ω–∫–∞{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">üîò –ö–Ω–æ–ø–∫–∏ –æ—Ç–¥–µ–ª–æ–≤</h1>
    <a href="/useful-info/buttons/create" class="btn btn-success">+ –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É</a>
</div>

<p style="color: var(--text-muted); margin-bottom: 1.5rem;">
    –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–Ω–æ–ø–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–ª–µ–∑–Ω–æ–µ" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª–∞.
    –ö–Ω–æ–ø–∫–∏ "–°–≤—è–∑–∞—Ç—å—Å—è —Å –æ—Ç–¥–µ–ª–æ–º" –∏ "–ù–∞–∑–∞–¥" –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
</p>

{% for dept in DepartmentType %}
<div class="card" style="margin-bottom: 1.5rem;">
    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
        <div class="card-title">
            {% if dept.value == 'development' %}üöÄ –û—Ç–¥–µ–ª –†–∞–∑–≤–∏—Ç–∏—è
            {% elif dept.value == 'marketing' %}üì¢ –û—Ç–¥–µ–ª –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞
            {% elif dept.value == 'design' %}üé® –û—Ç–¥–µ–ª –î–∏–∑–∞–π–Ω–∞
            {% endif %}
        </div>
        <a href="/useful-info/buttons/create?department={{ dept.value }}" class="btn btn-sm" 
           style="background: var(--primary); color: white; padding: 0.25rem 0.75rem; font-size: 0.875rem;">
            + –î–æ–±–∞–≤–∏—Ç—å
        </a>
    </div>
    
    {% if grouped[dept] %}
    <table>
        <thead>
            <tr>
                <th style="width: 50px;">‚Ññ</th>
                <th>–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏</th>
                <th style="width: 150px;">–°—Ç–∞—Ç—É—Å</th>
                <th style="width: 150px; text-align: center;">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for button in grouped[dept] %}
            <tr{% if not button.is_active %} style="opacity: 0.5;"{% endif %}>
                <td>{{ button.order }}</td>
                <td>
                    <strong>{{ button.button_text }}</strong>
                    <div style="color: var(--text-muted); font-size: 0.75rem; margin-top: 0.25rem;">
                        {{ button.message_text[:80] }}{% if button.message_text|length > 80 %}...{% endif %}
                    </div>
                </td>
                <td>
                    {% if button.is_active %}
                    <span class="badge badge-success">–ê–∫—Ç–∏–≤–Ω–∞</span>
                    {% else %}
                    <span class="badge badge-secondary">–í—ã–∫–ª—é—á–µ–Ω–∞</span>
                    {% endif %}
                </td>
                <td style="text-align: center;">
                    <div style="display: flex; gap: 0.5rem; justify-content: center;">
                        <a href="/useful-info/buttons/{{ button.id }}/edit" 
                           class="btn btn-sm" style="background: var(--primary); color: white; padding: 0.25rem 0.5rem;">
                            ‚úèÔ∏è
                        </a>
                        <form action="/useful-info/buttons/{{ button.id }}/toggle" method="post" style="margin: 0;">
                            <button type="submit" class="btn btn-sm" 
                                    style="background: var(--warning); color: white; padding: 0.25rem 0.5rem;">
                                {% if button.is_active %}üëÅÔ∏è{% else %}üëÅÔ∏è‚Äçüó®Ô∏è{% endif %}
                            </button>
                        </form>
                        <form action="/useful-info/buttons/{{ button.id }}/delete" method="post" style="margin: 0;"
                              onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´{{ button.button_text }}¬ª?');">
                            <button type="submit" class="btn btn-sm" 
                                    style="background: var(--danger); color: white; padding: 0.25rem 0.5rem;">
                                üóëÔ∏è
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div style="padding: 2rem; text-align: center; color: var(--text-muted);">
        <p>–ö–Ω–æ–ø–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</p>
        <a href="/useful-info/buttons/create?department={{ dept.value }}" class="btn btn-sm" 
           style="background: var(--primary); color: white;">
            –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é –∫–Ω–æ–ø–∫—É
        </a>
    </div>
    {% endif %}
</div>
{% endfor %}

<div class="card" style="background: var(--card-bg); border: 1px dashed var(--border);">
    <div style="padding: 1.5rem;">
        <h3 style="margin: 0 0 1rem 0; color: var(--text-muted);">üí° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
        <ul style="color: var(--text-muted); margin: 0; padding-left: 1.5rem;">
            <li>–ö–Ω–æ–ø–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –±–æ—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–ª–µ–∑–Ω–æ–µ" ‚Üí –≤—ã–±–æ—Ä –æ—Ç–¥–µ–ª–∞</li>
            <li>–ü–æ—Ä—è–¥–æ–∫ (‚Ññ) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–æ–∫ (–º–µ–Ω—å—à–µ = –≤—ã—à–µ)</li>
            <li>–ú–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É, –Ω–µ —É–¥–∞–ª—è—è –µ—ë</li>
            <li>–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTML-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤, —Å—Å—ã–ª–∫–∏)</li>
            <li>–ö–Ω–æ–ø–∫–∏ "–°–≤—è–∑–∞—Ç—å—Å—è —Å –æ—Ç–¥–µ–ª–æ–º" –∏ "–ù–∞–∑–∞–¥" –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–æ–Ω–µ—Ü</li>
        </ul>
    </div>
</div>
{% endblock %}

